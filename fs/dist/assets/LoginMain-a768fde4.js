import{a0 as Q,a as q,e as G,w as R,v as x,f as h,d as w,g as J,u as I,i as y,j as K,h as S,F as Y,b as $,a1 as D,B as _,C as N,G as f,D as z,E as d,X as k,J as i,a2 as P,S as l,U as ee,W as U,O as T,P as te,a3 as oe,m as L,a4 as ne,Z as B,a5 as re,a6 as A,a7 as H,$ as ie}from"./index-3a30b39c.js";import{u as O}from"./useRequest-b1a971dc.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";import{a as V,N as se}from"./FormItem-121f9524.js";import{f as ae,b as j,N as F}from"./Icon-026626f3.js";import{N as X}from"./Spin-671866d7.js";import{N as le,b as de}from"./LayoutContent-b76c84e7.js";import"./get-be2bb3ed.js";let M=!1;function ce(){if(Q&&window.CSS&&!M&&(M=!0,"registerProperty"in(window==null?void 0:window.CSS)))try{CSS.registerProperty({name:"--n-color-start",syntax:"<color>",inherits:!1,initialValue:"#0000"}),CSS.registerProperty({name:"--n-color-end",syntax:"<color>",inherits:!1,initialValue:"#0000"})}catch{}}const ue=e=>{const{textColor1:t,dividerColor:n,fontWeightStrong:s}=e;return{textColor:t,color:n,fontWeight:s}},ge={name:"Divider",common:q,self:ue},fe=ge,me=G("divider",`
 position: relative;
 display: flex;
 width: 100%;
 box-sizing: border-box;
 font-size: 16px;
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
`,[R("vertical",`
 margin-top: 24px;
 margin-bottom: 24px;
 `,[R("no-title",`
 display: flex;
 align-items: center;
 `)]),x("title",`
 display: flex;
 align-items: center;
 margin-left: 12px;
 margin-right: 12px;
 white-space: nowrap;
 font-weight: var(--n-font-weight);
 `),h("title-position-left",[x("line",[h("left",{width:"28px"})])]),h("title-position-right",[x("line",[h("right",{width:"28px"})])]),h("dashed",[x("line",`
 background-color: #0000;
 height: 0px;
 width: 100%;
 border-style: dashed;
 border-width: 1px 0 0;
 `)]),h("vertical",`
 display: inline-block;
 height: 1em;
 margin: 0 8px;
 vertical-align: middle;
 width: 1px;
 `),x("line",`
 border: none;
 transition: background-color .3s var(--n-bezier), border-color .3s var(--n-bezier);
 height: 1px;
 width: 100%;
 margin: 0;
 `),R("dashed",[x("line",{backgroundColor:"var(--n-color)"})]),h("dashed",[x("line",{borderColor:"var(--n-color)"})]),h("vertical",{backgroundColor:"var(--n-color)"})]),pe=Object.assign(Object.assign({},I.props),{titlePlacement:{type:String,default:"center"},dashed:Boolean,vertical:Boolean}),ve=w({name:"Divider",props:pe,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=J(e),s=I("Divider","-divider",me,fe,e,t),u=y(()=>{const{common:{cubicBezierEaseInOut:o},self:{color:v,textColor:g,fontWeight:r}}=s.value;return{"--n-bezier":o,"--n-color":v,"--n-text-color":g,"--n-font-weight":r}}),a=n?K("divider",void 0,u,e):void 0;return{mergedClsPrefix:t,cssVars:n?void 0:u,themeClass:a==null?void 0:a.themeClass,onRender:a==null?void 0:a.onRender}},render(){var e;const{$slots:t,titlePlacement:n,vertical:s,dashed:u,cssVars:a,mergedClsPrefix:o}=this;return(e=this.onRender)===null||e===void 0||e.call(this),S("div",{role:"separator",class:[`${o}-divider`,this.themeClass,{[`${o}-divider--vertical`]:s,[`${o}-divider--no-title`]:!t.default,[`${o}-divider--dashed`]:u,[`${o}-divider--title-position-${n}`]:t.default&&n}],style:a},s?null:S("div",{class:`${o}-divider__line ${o}-divider__line--left`}),!s&&t.default?S(Y,null,S("div",{class:`${o}-divider__title`},this.$slots),S("div",{class:`${o}-divider__line ${o}-divider__line--right`})):null)}}),he=e=>{const{primaryColor:t,successColor:n,warningColor:s,errorColor:u,infoColor:a,fontWeightStrong:o}=e;return{fontWeight:o,rotate:"252deg",colorStartPrimary:$(t,{alpha:.6}),colorEndPrimary:t,colorStartInfo:$(a,{alpha:.6}),colorEndInfo:a,colorStartWarning:$(s,{alpha:.6}),colorEndWarning:s,colorStartError:$(u,{alpha:.6}),colorEndError:u,colorStartSuccess:$(n,{alpha:.6}),colorEndSuccess:n}},_e={name:"GradientText",common:q,self:he},be=_e,xe=G("gradient-text",`
 display: inline-block;
 font-weight: var(--n-font-weight);
 -webkit-background-clip: text;
 background-clip: text;
 color: #0000;
 white-space: nowrap;
 background-image: linear-gradient(var(--n-rotate), var(--n-color-start) 0%, var(--n-color-end) 100%);
 transition:
 --n-color-start .3s var(--n-bezier),
 --n-color-end .3s var(--n-bezier);
`),we=Object.assign(Object.assign({},I.props),{size:[String,Number],fontSize:[String,Number],type:{type:String,default:"primary"},color:[Object,String],gradient:[Object,String]}),W=w({name:"GradientText",props:we,setup(e){ce();const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=J(e),s=y(()=>{const{type:r}=e;return r==="danger"?"error":r}),u=y(()=>{let r=e.size||e.fontSize;return r&&(r=ae(r)),r||void 0}),a=y(()=>{const r=e.color||e.gradient;if(typeof r=="string")return r;if(r){const b=r.deg||0,c=r.from,m=r.to;return`linear-gradient(${b}deg, ${c} 0%, ${m} 100%)`}}),o=I("GradientText","-gradient-text",xe,be,e,t),v=y(()=>{const{value:r}=s,{common:{cubicBezierEaseInOut:b},self:{rotate:c,[D("colorStart",r)]:m,[D("colorEnd",r)]:C,fontWeight:p}}=o.value;return{"--n-bezier":b,"--n-rotate":c,"--n-color-start":m,"--n-color-end":C,"--n-font-weight":p}}),g=n?K("gradient-text",y(()=>s.value[0]),v,e):void 0;return{mergedClsPrefix:t,compatibleType:s,styleFontSize:u,styleBgImage:a,cssVars:n?void 0:v,themeClass:g==null?void 0:g.themeClass,onRender:g==null?void 0:g.onRender}},render(){const{mergedClsPrefix:e,onRender:t}=this;return t==null||t(),S("span",{class:[`${e}-gradient-text`,`${e}-gradient-text--${this.compatibleType}-type`,this.themeClass],style:[{fontSize:this.styleFontSize,backgroundImage:this.styleBgImage},this.cssVars]},this.$slots)}}),ye={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Se=f("path",{d:"M608 112c-167.9 0-304 136.1-304 304c0 70.3 23.9 135 63.9 186.5l-41.1 41.1l-62.3-62.3a8.15 8.15 0 0 0-11.4 0l-39.8 39.8a8.15 8.15 0 0 0 0 11.4l62.3 62.3l-44.9 44.9l-62.3-62.3a8.15 8.15 0 0 0-11.4 0l-39.8 39.8a8.15 8.15 0 0 0 0 11.4l62.3 62.3l-65.3 65.3a8.03 8.03 0 0 0 0 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6A304.06 304.06 0 0 0 608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644c-60.9 0-118.2-23.7-161.2-66.8c-43.1-43-66.8-100.3-66.8-161.2c0-60.9 23.7-118.2 66.8-161.2c43-43.1 100.3-66.8 161.2-66.8c60.9 0 118.2 23.7 161.2 66.8c43.1 43 66.8 100.3 66.8 161.2c0 60.9-23.7 118.2-66.8 161.2z",fill:"currentColor"},null,-1),Ce=[Se],$e=w({name:"KeyOutlined",render:function(t,n){return _(),N("svg",ye,Ce)}}),ke={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ze=f("path",{d:"M858.5 763.6a374 374 0 0 0-80.6-119.5a375.63 375.63 0 0 0-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1c-.4.2-.8.3-1.2.5c-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 0 0-80.6 119.5A371.7 371.7 0 0 0 136 901.8a8 8 0 0 0 8 8.2h60c4.4 0 7.9-3.5 8-7.8c2-77.2 33-149.5 87.8-204.3c56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 0 0 8-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z",fill:"currentColor"},null,-1),Ie=[ze],Ne=w({name:"UserOutlined",render:function(t,n){return _(),N("svg",ke,Ie)}}),Re={"mt-4":""},Le={flex:"","justify-center":"",class:"box"},Be=w({__name:"SsoLogin",props:{provideList:null,loginInitData:null},setup(e){const{query:t}=T();T(),te();function n(){window.open(`/api/v1/jobor/oidc/redirect?next=${t.redirect}`,"_self")}return(s,u)=>{var a;return _(),N("div",Re,[(a=e.loginInitData)!=null&&a.local_auth?(_(),z(i(ve),{key:0},{default:d(()=>[k(" 或 ")]),_:1})):P("",!0),f("div",Le,[l(i(U),{"mt-6":"",block:"",type:"primary",onClick:u[0]||(u[0]=o=>n())},{default:d(()=>{var o;return[k(ee(((o=e.loginInitData)==null?void 0:o.sso_tip)??"通过SSO登录"),1)]}),_:1})])])}}});const Oe=E(Be,[["__scopeId","data-v-eb7b51ee"]]),Pe=e=>(A("data-v-bc6866bd"),e=e(),H(),e),Te={class:"form-container"},Ee=Pe(()=>f("div",{class:"form-header"},[f("div",{class:"title"}," Jobor 定时任务 "),f("div",{class:"desc"})],-1)),De=w({__name:"LoginForm",setup(e){const{query:t}=T();oe();const{data:n}=O(()=>B.toLoginInit(t),{auto:!0}),{loading:s,data:u}=O(()=>B.toLogin({}),{auto:!1}),a=L(null),o=L({}),v=L(!1),g={username:{required:!0,message:"请输入用户名",trigger:"blur"},password:{required:!0,message:"请输入密码",trigger:"blur"},mfa_code:{required:!0,message:"请输入OTP认证",trigger:"blur"}};function r(){var b;(b=a.value)==null||b.validate(async c=>{if(c)return;const m={...t,...o.value};re(JSON.stringify(m)),v.value=!0;const{data:C,run:p}=O(()=>B.toLogin(m),{auto:!1});await p(),v.value=!1;const Z=t.redirect??"/";window.open(Z,"_self")})}return(b,c)=>(_(),N("div",Te,[Ee,l(i(X),{show:i(s)},{default:d(()=>{var m,C;return[(m=i(n))!=null&&m.local_auth?(_(),z(i(se),{key:0,ref_key:"formRef",ref:a,model:o.value,rules:g},{default:d(()=>[l(i(V),{path:"username","show-label":!1},{default:d(()=>[l(i(j),{value:o.value.username,"onUpdate:value":c[0]||(c[0]=p=>o.value.username=p),placeholder:"输入用户名"},{prefix:d(()=>[l(i(F),{component:i(Ne)},null,8,["component"])]),_:1},8,["value"])]),_:1}),l(i(V),{path:"password","show-label":!1},{default:d(()=>[l(i(j),{value:o.value.password,"onUpdate:value":c[1]||(c[1]=p=>o.value.password=p),type:"password","show-password-on":"click",placeholder:"输入密码",onKeydown:c[2]||(c[2]=ne(p=>r(),["enter"]))},{prefix:d(()=>[l(i(F),{component:i($e)},null,8,["component"])]),_:1},8,["value"])]),_:1}),l(i(U),{"mt-6":"",block:"",type:"primary",loading:v.value,onClick:c[3]||(c[3]=p=>r())},{default:d(()=>[k(" 登录 ")]),_:1},8,["loading"])]),_:1},8,["model"])):P("",!0),(C=i(n))!=null&&C.sso_auth?(_(),z(Oe,{key:1,"login-init-data":i(n)},null,8,["login-init-data"])):P("",!0)]}),_:1},8,["show"])]))}});const Ve=E(De,[["__scopeId","data-v-bc6866bd"]]),je=e=>(A("data-v-107a1a2f"),e=e(),H(),e),Fe={class:"container-box",flex:"","h-full":""},Me={class:"banner",relative:"","items-center":"","justify-center":""},We=je(()=>f("div",{class:"banner-desc"}," 我们将始终为您提供安全可靠的分布式定时任务 ",-1)),qe={class:"content",relative:"","flex-1":"",flex:"","justify-center":"","items-center":""},Ge=w({__name:"LoginMain",setup(e){return(t,n)=>{const s=ie("selector");return _(),z(i(X),{"h-100vh":"",show:!1},{default:d(()=>[l(i(de),{position:"absolute"},{default:d(()=>[l(i(le),{position:"absolute"},{default:d(()=>[f("div",Fe,[f("div",Me,[l(i(W),{class:"logo-img",gradient:{deg:90,from:"rgb(255,255,255)",to:"#9bbcff"}},{default:d(()=>[k(" Jobor ")]),_:1},8,["gradient"]),l(s,{class:"banner-inner",absolute:""},{default:d(()=>[We]),_:1})]),f("div",qe,[l(i(W),{class:"logo-img",style:{"font-size":"32px"},gradient:{deg:90,from:"#4372d2",to:"rgb(163,184,225)"}},{default:d(()=>[k(" Jobor ")]),_:1},8,["gradient"]),l(Ve)])])]),_:1})]),_:1})]),_:1})}}});const Ye=E(Ge,[["__scopeId","data-v-107a1a2f"]]);export{Ye as default};
